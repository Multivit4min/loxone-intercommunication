import { describe, expect, test } from "@jest/globals"
import { LoxoneIOPacket } from "../src/packet/LoxoneIOPacket"

const buffer = Buffer.from([0x9e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x31, 0x32, 0x38, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x32, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x74, 0x65, 0x78, 0x74, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x02, 0x3a, 0x29, 0x00])

describe("LoxoneIOPacket", () => {
  test("checks for validity of Buffer destruction and building", () => {
    const packet = LoxoneIOPacket.fromBuffer(buffer)
    console.log(buffer)
    console.log(packet.toBuffer())
    expect(buffer.byteLength).toBe(packet.toBuffer().byteLength)
    expect(buffer).toEqual(packet.toBuffer())
    console.log(packet)
  })
})